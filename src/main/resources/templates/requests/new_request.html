<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta name="_csrf" th:content="${_csrf.token}"/>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>New Authorisation Request - Placements Management Web App</title>
    <link rel="stylesheet" href="/css/bootstrap.min.css"/>
    <link rel="stylesheet" href="/css/styles.css"/>
</head>
<body>
<nav th:replace="fragments/navigation :: navigation"></nav>
<div class="container">
    <div class="row justify-content-center">
        <div class="col">
            <h1 class="text-center">Create New Authorisation Request</h1>
        </div>
    </div>
    <div th:replace="fragments/alerts :: alerts"></div>
    <hr/>
    <div class="row">
        <div class="col-md text-center">
            <!-- Bootstrap Icons: plus-circle-fill, https://icons.getbootstrap.com/icons/plus-circle-fill/.
                 Copyright (c) 2019-2020 The Bootstrap Authors.
                 Licensed under the MIT License (https://github.com/twbs/icons/blob/main/LICENSE.md). -->
            <svg xmlns="http://www.w3.org/2000/svg" width="64" height="64" fill="#0067B0" class="bi bi-plus-circle-fill"
                 viewBox="0 0 16 16">
                <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM8.5 4.5a.5.5 0 0 0-1 0v3h-3a.5.5 0 0 0 0 1h3v3a.5.5 0 0 0 1 0v-3h3a.5.5 0 0 0 0-1h-3v-3z"/>
            </svg>
            <hr/>
            <p>
                Use the form to create an authorisation request. Be as accurate as possible with the address of the provider,
                and with the details of the placement being proposed. If necessary, you can upload documents to support
                your request, but these must not be executable files, or totalling 10MB in size.
            </p>
            <p>
                You must provide the username of your assigned tutor, who will approve your request alongside an administrator.
            </p>
        </div>
        <div class="col-md">
            <form th:action="@{/requests/new}" id="submissionForm" method="post" enctype="multipart/form-data" th:object="${authorisationRequest}">
                <h2>Provider</h2>
                <div class="form-group">
                    <label for="providerName">Provider Name</label>
                    <input type="text" class="form-control" name="providerName" id="providerName" th:field="*{providerName}" required/>
                    <div class="alert alert-danger" role="alert" th:if="${#fields.hasErrors('providerName')}">
                        <span th:errors="*{providerName}"></span>
                    </div>
                </div>
                <div class="form-group">
                    <label for="providerAddressLine1">Provider Address Line 1</label>
                    <input type="text" class="form-control" name="providerAddressLine1" id="providerAddressLine1" th:field="*{providerAddressLine1}" required/>
                    <div class="alert alert-danger" role="alert" th:if="${#fields.hasErrors('providerAddressLine1')}">
                        <span th:errors="*{providerAddressLine1}"></span>
                    </div>
                </div>
                <div class="form-group">
                    <label for="providerAddressLine1">Provider Address Line 2</label>
                    <input type="text" class="form-control" name="providerAddressLine2" id="providerAddressLine2" th:field="*{providerAddressLine2}" />
                    <div class="alert alert-danger" role="alert" th:if="${#fields.hasErrors('providerAddressLine2')}">
                        <span th:errors="*{providerAddressLine2}"></span>
                    </div>
                </div>
                <div class="form-group">
                    <label for="providerAddressCity">Provider Address City</label>
                    <input type="text" class="form-control" name="providerAddressCity" id="providerAddressCity" th:field="*{providerAddressCity}" required/>
                    <div class="alert alert-danger" role="alert" th:if="${#fields.hasErrors('providerAddressCity')}">
                        <span th:errors="*{providerAddressCity}"></span>
                    </div>
                </div>
                <div class="form-group">
                    <label for="providerAddressPostcode">Provider Address Postcode</label>
                    <input type="text" class="form-control" name="providerAddressPostcode" id="providerAddressPostcode" th:field="*{providerAddressPostcode}" required/>
                    <div class="alert alert-danger" role="alert" th:if="${#fields.hasErrors('providerAddressPostcode')}">
                        <span th:errors="*{providerAddressPostcode}"></span>
                    </div>
                </div>
                <h2>Placement</h2>
                <div class="form-group">
                    <label for="title">Placement Title</label>
                    <input type="text" class="form-control" name="title" id="title" th:field="*{title}" required/>
                    <div class="alert alert-danger" role="alert" th:if="${#fields.hasErrors('title')}">
                        <span th:errors="*{title}"></span>
                    </div>
                </div>
                <div class="form-group">
                    <label for="startDate">Placement Start Date</label>
                    <input type="date" class="form-control" name="startDate" id="startDate" th:field="*{startDate}" required />
                    <div class="alert alert-danger" role="alert" th:if="${#fields.hasErrors('startDate')}">
                        <span th:errors="*{startDate}"></span>
                    </div>
                </div>
                <div class="form-group">
                    <label for="endDate">Placement End Date</label>
                    <input type="date" class="form-control" name="startDate" id="endDate" th:field="*{endDate}" required />
                    <div class="alert alert-danger" role="alert" th:if="${#fields.hasErrors('endDate')}">
                        <span th:errors="*{endDate}"></span>
                    </div>
                </div>
                <div class="form-group">
                    <label for="details">Request Details</label>
                    <textarea cols="50" wrap="hard" class="form-control" name="details" id="details" th:field="*{details}" required></textarea>
                    <div class="alert alert-danger" role="alert" th:if="${#fields.hasErrors('details')}">
                        <span th:errors="*{details}"></span>
                    </div>
                </div>
                <h2>Additional Details</h2>
                <div class="form-group">
                    <label for="tutorUsername">Assigned Tutor Username</label>
                    <input type="text" class="form-control" name="tutorUsername" id="tutorUsername" th:field="*{tutorUsername}" required/>
                    <div class="alert alert-danger" role="alert" th:if="${#fields.hasErrors('tutorUsername')}">
                        <span th:errors="*{tutorUsername}"></span>
                    </div>
                    <br id="tutorUsernameValidationSpacer" hidden />
                    <div id="tutorUsernameValidationAlert" class="alert alert-danger" role="alert" hidden>
                        <span id="tutorUsernameValidationMessage">Text</span>
                    </div>
                </div>
                <div class="form-group" id="filesGroup">
                    <label for="files">Document Upload</label>
                    <input type="file" name="files" id="files" multiple/>
                    <div class="alert alert-danger" role="alert" th:if="${#fields.hasErrors('files')}">
                        <span th:errors="*{files}"></span>
                    </div>
                    <br id="filesValidationSpacer" hidden />
                    <div id="filesValidationAlert" class="alert alert-danger" role="alert" hidden>
                        <span id="filesValidationMessage">Text</span>
                    </div>
                </div>
                <button type="submit" class="btn btn-primary btn-block btn-bottom-margin" id="submitButton">Submit Request</button>
                <a class="btn btn-secondary btn-block btn-bottom-margin" href="/requests">Cancel</a>
            </form>
        </div>
    </div>
</div>
<span id="tutorError" hidden>False</span>
<span id="filesError" hidden>False</span>
<!-- SCRIPTS -->
<script src="/js/jquery-3.5.1.min.js"></script>
<script src="/js/bootstrap.bundle.min.js"></script>
<script src="/js/submit-button-status.js"></script>
<script src="/js/tutor-check.js"></script>
<script src="/js/files-size-check.js"></script>
<!-- Firebase JS SDK -->
<script src="https://www.gstatic.com/firebasejs/8.2.4/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.2.4/firebase-messaging.js"></script>
<script src="/firebase-config.js"></script>
<script src="/js/firebase-messaging.js"></script>
</body>
</html>